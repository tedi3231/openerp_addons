<?xml version="1.0" encoding="utf-8" ?>
<openerp>
    <data>
        <record model="ir.ui.view" id="view_tms_store_tree">
            <field name="name">tms.store.tree</field>
            <field name="model">tms.store</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Stores">
                    <field name="province_id"/>
                    <field name="name"/>
                    <field name="storenum"/>
                    <field name="contactperson" />
                    <field name="address"/>
                    <field name="telephone" />
                    <field name="mobile"/>
                </tree>
            </field>
        </record>
        <record model="ir.ui.view" id="view_tms_store_form">
            <field name="name">tms.store.form</field>
            <field name="model">tms.store</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Store" version="7.0">
                    <sheet>
                        <group col="4">
                            <field name="name"/>
                            <field name="storenum"/>
                        </group>
                        <group col="4">
                            <field name="province_id" />
                            <field name="address"/>
                        </group>
                        <group col="4" string="Contact Information">
                            <field name="contactperson"/>
                            <field name="telephone"/>
                            <field name="mobile"/>
                        </group>
                        <group col="4" string="Network Information">
                            <field name="netusername"/>
                            <field name="netuserpass"/>
                            <field name="dynamicdomain"/>
                            <field name="dynamicdomainpass"/>
                            <field name="dynamicdomainaddress"/>
                            <field name="dynamicdomainotheraddress"/>
                            <field name="peanutuserpass"/>
                            <field name="peanutvalidemail" widget="email"/>
                            <field name="peanutemailpass"/>
                            <field name="poscdk"/>
                        </group>
                        <field name="remark" placeholder="Remark" colspan="4"/>
                    </sheet>
                </form>
            </field>
        </record>
        <record model="ir.actions.act_window" id="action_tms_store_tree_show">
            <field name="name">Stores</field>
            <field name="res_model">tms.store</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <!--<field name="context">{"search_default_groupby_category" : True,}</field>-->
        </record>
        <record model="ir.ui.view" id="view_tms_applyinfo_tree">
            <field name="name">tms.applyinfo.tree</field>
            <field name="model">tms.applyinfo</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Applyinfos">
                    <field name="processid"/>
                    <field name="store_id"/>
                    <field name="storenum"/>
                    <field name="province"/>
                    <field name="contactperson"/>
                    <field name="telephone"/>
                    <field name="content"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>
        <record model="ir.ui.view" id="view_tms_applyinfo_form">
            <field name="name">tms.applyinfo.form</field>
            <field name="model">tms.applyinfo</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Applyinfo" version="7.0">
                    <sheet>
                        <separator string="Workflow actions" colspan="4"/>
                        <group col="4">
                            <field name="state" invisible="1"/>
                            <button name="btn_received" string="Received" states="unreceived"/>
                            <button name="btn_hasdone" string ="Done" states="hasreceived"/>
                            <button name="btn_hascofirm" string="Cofirm" states="hasconfirm"/>
                        </group>
                        <group col="4">
                            <field name="store_id" on_change="on_change_store(store_id)"/>
                            <field name="province"/>
                            <field name="storenum"/>
                            <field name="contactperson"/>
                            <field name="telephone"/>
                            <field name="mobile"/>
                            <field name="address"/>
                        </group>
                        <group col="4" string="Content">
                            <field name="content" colspan="4"  nolabel="1" />
                        </group>
                        <field name="applyinfoitem_ids" states="hasreceived,hasdone,hasconfirm">
                            <tree version="7.0" editable="bottom">
                                <field name="name"/>
                                <field name="user_id"/>
                                <field name="create_time"/>
                            </tree>
                        </field>
                    </sheet>
                </form>
            </field>
        </record>

        <!-- feebase info start -->
        <record model="ir.ui.view" id="view_tms_feeforother_tree">
            <field name="name">tms.feeforother.tree</field>
            <field name="model">tms.feeforother</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="其他费用登记">
                    <field name="processid"/>
                    <field name="store_id" />
                    <field name="province"/>
                    <field name="storenum"/>
                    <field name="accountperiod"/>
                    <field name="feetype_id"/>
                    <field name="feedate"/>
                    <field name="payman"/>
                    <field name="amount"/>
                    <field name="accountamount"/>
					<field name="state"/>
                </tree>
            </field>
        </record>
        <record model="ir.ui.view" id="view_tms_feeforother_form">
            <field name="name">tms.feeforother.form</field>
            <field name="model">tms.feeforother</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="其他费用登记" version="7.0">
                    <sheet string="其他费用登记">
                        <group col="4">
                            <field name="store_id" on_change="on_change_store(store_id)"/>
                            <field name="province"/>
                            <field name="storenum"/>
                            <field name="feedate"/>
                            <field name="feetype_id"/>
                            <field name="payman"/>
                            <field name="amount"/>
                            <field name="accountamount"/>
							<field name="state"/>
                        </group>
                        <group col="4" string="说明">
                            <field name="remark" colspan="4"  nolabel="1" />
                        </group>
                    </sheet>
                </form>
            </field>
		</record>
        <!-- feebase info start -->
        <record model="ir.ui.view" id="view_tms_feeforitservice_tree">
            <field name="name">tms.feeforitservice.tree</field>
            <field name="model">tms.feeforitservice</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="IT服务费登记">
                    <field name="processid"/>
                    <field name="store_id" />
                    <field name="province"/>
                    <field name="storenum"/>
                    <field name="accountperiod"/>
                    <field name="feetype_id"/>
                    <field name="feedate"/>
                    <field name="payman"/>
                    <field name="amount" sum="Amount" />
                    <field name="accountamount" sum="Account Amount" />
                </tree>
            </field>
        </record>
        <record model="ir.ui.view" id="view_tms_feeforitservice_form">
            <field name="name">tms.feeforitservice.form</field>
            <field name="model">tms.feeforitservice</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="IT服务费登记" version="7.0">
                    <sheet string="IT服务费">
                        <group col="4">
                            <field name="store_id" on_change="on_change_store(store_id)"/>
                            <field name="province"/>
                            <field name="storenum"/>
                            <field name="feedate"/>
                            <field name="feetype_id"/>
                            <field name="payman"/>
                            <field name="amount"/>
                            <field name="accountamount"/>
                        </group>
                        <group col="4" string="说明">
                            <field name="remark" colspan="4"  nolabel="1" />
                        </group>
                    </sheet>
                </form>
            </field>
        </record>
        <!-- feebase info start -->
        <record model="ir.ui.view" id="view_tms_feebase_tree">
            <field name="name">tms.feebase.tree</field>
            <field name="model">tms.feebase</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="维护费登记">
                    <field name="processid"/>
                    <field name="store_id" />
                    <field name="province"/>
                    <field name="storenum"/>
                    <field name="accountperiod"/>
                    <field name="feetype_id"/>
                    <field name="feedate"/>
                    <field name="payman"/>
                    <field name="amount" sum="Account" />
                    <field name="accountamount" sum="Account Amount"/>
					<field name="state"/>
					<field name="oanum"/>
                </tree>
            </field>
        </record>
        <record model="ir.ui.view" id="view_tms_feebase_form">
            <field name="name">tms.feebase.form</field>
            <field name="model">tms.feebase</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="维护费登记" version="7.0">
                    <sheet string="Fee">
                        <group col="4">
                            <field name="store_id" on_change="on_change_store(store_id)"/>
                            <field name="province"/>
                            <field name="storenum"/>
                            <field name="feedate"/>
                            <field name="feetype_id"/>
                            <field name="payman"/>
                            <field name="amount"/>
                            <field name="accountamount"/>
                        </group>
                        <group col="4" string="说明">
                            <field name="remark" colspan="4"  nolabel="1" />
                        </group>
                    </sheet>
                </form>
            </field>
        </record>
        <!-- feebase info start -->
        <record model="ir.ui.view" id="view_tms_feeforsend_tree">
            <field name="name">tms.feeforsend.tree</field>
            <field name="model">tms.feeforsend</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="FeeBases">
                    <field name="processid"/>
                    <field name="store_id" />
                    <field name="province"/>
                    <field name="storenum"/>
                    <field name="accountperiod"/>
                    <field name="feetype_id"/>
                    <field name="feedate"/>
                    <field name="payman"/>
                    <field name="amount" sum="Account"/>
                    <field name="accountamount" sum="Account Amount" />
					<field name="state"/>
					<field name="oanum"/>
                </tree>
            </field>
        </record>
        <record model="ir.ui.view" id="view_tms_feeforsend_form">
            <field name="name">tms.feeforsend.form</field>
            <field name="model">tms.feeforsend</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Fee For Send" version="7.0">
                    <sheet string="Fee">
                        <group col="4">
                            <field name="store_id" on_change="on_change_store(store_id)"/>
                            <field name="province"/>
                            <field name="storenum"/>
                            <field name="accountperiod"/>
                            <field name="feetype_id"/>
                            <field name="feedate"/>
                            <field name="payman"/>
                            <field name="amount"/>
                            <field name="accountamount"/>
							<field name="sendcompany"/>
							<field name="sendordernum"/>
							<field name="sendproduct"/>
                        </group>
                        <group col="4" string="Remark">
                            <field name="remark" colspan="4"  nolabel="1" />
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <!-- feebase info start -->
        <record model="ir.ui.view" id="view_tms_feeforproduct_tree">
            <field name="name">tms.feeforproduct.tree</field>
            <field name="model">tms.feeforproduct</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Fee For Product">
                    <field name="processid"/>
                    <field name="store_id" />
                    <field name="province"/>
                    <field name="storenum"/>
                    <field name="feedate"/>
                    <field name="feetype_id"/>
                    <field name="payman"/>
                    <field name="amount" sum="Amount"/>
                    <field name="accountamount" sum="Account Amount"/>
					<field name="state"/>
					<field name="oanum"/>
                </tree>
            </field>
        </record>
        <record model="ir.ui.view" id="view_tms_feeforproduct_form">
            <field name="name">tms.feeforproduct.form</field>
            <field name="model">tms.feeforproduct</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Fee For Product" version="7.0">
                    <sheet>
						<!--<group col="4">
							<field name="store_id"/>
						</group>-->
						<group col="4">
                            <field name="store_id" on_change="on_change_store(store_id)"/>
							<field name="province"/>
                            <field name="storenum" readonly="True"/>
                            <field name="feedate"/>
                            <field name="feetype_id"/>
                            <field name="payman"/>
						</group>
						<group col="4">
							<field name="productname"/>
							<field name="producttype"/>
							<field name="productprice" on_change="on_change_productaccount(productcount,productprice)"/>
							<field name="productcount" on_change="on_change_productaccount(productcount,productprice)"/>
                            <field name="amount"/>
							<field name="accountproductprice"  on_change="on_change_accountproductaccount(accountproductcount,accountproductprice)" />
							<field name="accountproductcount" on_change="on_change_accountproductaccount(accountproductcount,accountproductprice)" />
                            <field name="accountamount"/>
                        </group>
                        <group col="4" string="Remark">
                            <field name="remark" colspan="4"  nolabel="1" />
                        </group>
                    </sheet>
                </form>
            </field>
        </record>
		
		<record model="ir.ui.view" id="view_tms_feeforproductit_tree">
            <field name="name">tms.feeforproductit.tree</field>
            <field name="model">tms.feeforproductit</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Fee For ProductIT">
                    <field name="processid"/>
                    <field name="store_id" />
                    <field name="province"/>
                    <field name="storenum"/>
                    <field name="feedate"/>
                    <field name="feetype_id"/>
                    <field name="payman"/>
                    <field name="amount" sum="Amount"/>
                    <field name="accountamount" sum="Account Amount"/>
					<field name="state"/>
					<field name="oanum"/>
                </tree>
            </field>
        </record>
        <record model="ir.ui.view" id="view_tms_feeforproductit_form">
            <field name="name">tms.feeforproductit.form</field>
            <field name="model">tms.feeforproductit</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Fee For ProductIT" version="7.0">
                    <sheet>
						<!--<group col="4">
							<field name="store_id"/>
						</group>-->
						<group col="4">
                            <field name="store_id" on_change="on_change_store(store_id)"/>
							<field name="province"/>
                            <field name="storenum" readonly="True"/>
                            <field name="feedate"/>
                            <field name="feetype_id"/>
                            <field name="payman"/>
						</group>
						<group col="4">
							<field name="productname"/>
							<field name="productprice" on_change="on_change_productaccount(productcount,productprice)"/>
							<field name="productcount" on_change="on_change_productaccount(productcount,productprice)"/>
                            <field name="amount"/>
							<field name="accountproductprice"  on_change="on_change_accountproductaccount(accountproductcount,accountproductprice)" />
							<field name="accountproductcount" on_change="on_change_accountproductaccount(accountproductcount,accountproductprice)" />
                            <field name="accountamount"/>
                        </group>
                        <group col="4" string="Purpose">
                            <field name="remark" colspan="4"  nolabel="1" />
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

		<!-- the dropdown menuitems in more menu  start-->
		<!-- 导出对账 -->
		<record id="action_tms_export_fee_to_account" model="ir.actions.server">
            <field name="name">Export To Account</field>
            <field name="type">ir.actions.server</field>
            <field name="model_id" ref="model_tms_feebase"/>
            <field name="state">code</field>
            <field name="code">self.export_to_account(cr, uid,context.get('active_ids'), context=context)</field>
        </record>
        
        <record id="val_action_tms_export_fee_to_account" model="ir.values">
            <field name="name">Export to Account</field>
            <field name="action_id" ref="action_tms_export_fee_to_account"/>
            <field name="value" eval="'ir.actions.server,' + str(ref('action_tms_export_fee_to_account'))"/>
            <field name="key">action</field>
            <field name="model_id" ref="model_tms_feebase"/>
            <field name="model">tms.feebase</field>
            <field name="key2">client_action_multi</field>
        </record>

		<!-- 已经回款 -->
		<record id="action_tms_set_hasback" model="ir.actions.server">
            <field name="name">Set Has Back</field>
            <field name="type">ir.actions.server</field>
            <field name="model_id" ref="model_tms_feebase"/>
            <field name="state">code</field>
            <field name="code">self.set_to_hasback(cr, uid,context.get('active_ids'), context=context)</field>
        </record>
        
        <record id="val_action_tms_set_hasback" model="ir.values">
            <field name="name">Set Hasback</field>
            <field name="action_id" ref="action_tms_set_hasback"/>
            <field name="value" eval="'ir.actions.server,' + str(ref('action_tms_set_hasback'))"/>
            <field name="key">action</field>
            <field name="model_id" ref="model_tms_feebase"/>
            <field name="model">tms.feebase</field>
            <field name="key2">client_action_multi</field>
        </record>
		<!-- the dropdown menuitems in more menu  start-->

        <!-- feebase info end -->
        <record model="ir.actions.act_window" id="action_tms_applyinfo_tree_show">
            <field name="name">Applyinfos</field>
            <field name="res_model">tms.applyinfo</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>
        <record model="ir.actions.act_window" id="action_tms_feeforother_tree_show">
            <field name="name">其他费用登记</field>
            <field name="res_model">tms.feeforother</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>            
			<field name="domain">[('state','=','draft')]</field>
        </record>
        <record model="ir.actions.act_window" id="action_tms_feeforitservice_tree_show">
            <field name="name">IT服务费登记</field>
            <field name="res_model">tms.feeforitservice</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>            
			<field name="domain">[('state','=','draft')]</field>
        </record>
        <record model="ir.actions.act_window" id="action_tms_feebase_tree_show">
            <field name="name">维护费登记</field>
            <field name="res_model">tms.feebase</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>            
			<field name="domain">[('state','=','draft')]</field>
        </record>
        <record model="ir.actions.act_window" id="action_tms_feeforsend_tree_show">
            <field name="name">Fee for send</field>
            <field name="res_model">tms.feeforsend</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>            
			<!--<field name="domain">[('state','=','draft')]</field>-->
        </record>
        <record model="ir.actions.act_window" id="action_tms_feeforproduct_tree_show">
            <field name="name">Fee for Product</field>
            <field name="res_model">tms.feeforproduct</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>            
			<field name="domain">[('state','=','draft')]</field>
        </record>
        <record model="ir.actions.act_window" id="action_tms_feeforproductit_tree_show">
            <field name="name">Fee for ProductIT</field>
            <field name="res_model">tms.feeforproductit</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>            
			<field name="domain">[('state','=','draft')]</field>
        </record>
        
        <menuitem id="menu_tms_root" name="TMS" />
        <menuitem id="menu_tms_manager" name="TMS" parent="menu_tms_root"/>
        <menuitem id="menu_tms_applyinfo_manager_root" name="Applyinfo Management" parent="menu_tms_root"/>
        <menuitem id="menu_tms_store_manager_root" name="Stores Management" parent="menu_tms_root"/>
        <menuitem id="menu_tms_finance_center_manager" name="Finance Center" parent="menu_tms_root"/>
        <menuitem id="menu_tms_account_center_manager" name="Account Center" parent="menu_tms_root"/>
        <menuitem id="menu_tms_store_manager" parent="menu_tms_store_manager_root" name="Store Manager" action="action_tms_store_tree_show"/>
        <menuitem id="menu_tms_applyinfo_manager" parent="menu_tms_applyinfo_manager_root" name="Applyinfo Manager" action="action_tms_applyinfo_tree_show"/>
        <menuitem id="menu_tms_feeforother_manager" parent="menu_tms_finance_center_manager" name="其他费用登记" action="action_tms_feeforother_tree_show"/>
        <menuitem id="menu_tms_feebase_manager" parent="menu_tms_finance_center_manager" name="维护费登记" action="action_tms_feebase_tree_show"/>
        <menuitem id="menu_tms_feeforitservice_manager" parent="menu_tms_finance_center_manager" name="IT服务费登记" action="action_tms_feeforitservice_tree_show"/>
        <menuitem id="menu_tms_feeforsend_manager" parent="menu_tms_finance_center_manager" name="FeeForSend Manager" action="action_tms_feeforsend_tree_show"/>
        <menuitem id="menu_tms_feeforproduct_manager" parent="menu_tms_finance_center_manager" name="FeeForProduct Manager" action="action_tms_feeforproduct_tree_show"/>
        <menuitem id="menu_tms_feeforproductit_manager" parent="menu_tms_finance_center_manager" name="FeeForProductIt Manager" action="action_tms_feeforproductit_tree_show"/>
    </data>
</openerp>

